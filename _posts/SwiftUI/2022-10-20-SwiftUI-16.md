---
title: "[SwiftUI] Interfacing with UIKit 2"
excerpt: "SwiftUI Tutorial 16"
  
toc: true
toc_sticky: true

categories:
  - SwiftUI-Tutorials
tags:
  - [iOS, SwiftUI]

permalink: /swiftui-tutorials/SwiftUI-16

---

> ì›ë¬¸: **[íŠœí† ë¦¬ì–¼ í˜ì´ì§€](https://developer.apple.com/tutorials/swiftui/interfacing-with-uikit)**

## Section 3. Track the Page in a SwiftUI View's State

ì•ì„œ ë§Œë“¤ì–´ë‘ì—ˆë˜ UIPageViewControllerì— ëª‡ í˜ì´ì§€ í™”ë©´ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” UIPageControlì„ ë¶™ì´ê¸° ì „ì— PageViewì˜ í˜„ì¬ í˜ì´ì§€ê°€ ëª‡ í˜ì´ì§€ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ë³´ì.

1. ìš°ì„ ì€ PageViewControllerì— currentPage í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•œë‹¤.
   - ì´ ë•Œ currentPageëŠ” binding í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  updateUIViewController ë‚´ì— ì‚¬ìš©í•˜ë˜ setViewControllerì—ë„ [currnentPage]ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•œë‹¤.

<img src="https://user-images.githubusercontent.com/22000470/196900859-215ea28c-008e-48bf-8759-ea70bb569b94.png" width="400">

PageViewControllerì— ì‚¬ìš©ë˜ëŠ” currentPageê°€ @Bindingìœ¼ë¡œ ì„ ì–¸ë˜ì—ˆë‹¤ë©´ ì–´ë”˜ê°€ì— @Stateë¡œ ì„ ì–¸ëœ currentPageê°€ ì¡´ì¬í•  í„°. 

2. ì´ í”„ë¡œí¼í‹°ëŠ” PageView íŒŒì¼ì— ì„ ì–¸í•´ì¤€ë‹¤. 
   - ì¶”í›„ì— UIPageControlì—ì„œë„ ì´ ê°’ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” UIPageVCì™€ UIPageControllì˜ ê³µí†µ ì¡°ìƒì— ì„ ì–¸ë˜ì–´ì•¼ í•œë‹¤.

<img src="https://user-images.githubusercontent.com/22000470/196901495-abb69804-6942-470f-a224-72da6d5a9c4a.png" width="400">

3. PageViewì— currentPage ìš”ì†Œë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë„ë¡ Textë¥¼ ì¶”ê°€í•œë‹¤.
   - VStackì— ë„£ì–´ì„œ ì•„ë˜ Textë§Œ ì¶”ê°€í•œë‹¤. Pageë¥¼ ì›€ì§ì—¬ë„ currentPageê°€ ë³€í™”í•˜ì§„ ì•ŠëŠ”ë‹¤.

![image](https://user-images.githubusercontent.com/22000470/196961495-1c5aa83e-1bab-4e41-b740-c1fa87a2aa44.png)

ê·¸ë ‡ë‹¤ë©´ currentPageì˜ ìˆ«ìë¥¼ ë³€ê²½í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ê°€! ê·¸ê²ƒì€ 4ë‹¨ê³„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

4. `pageViewController(_:didFinishAnimating:previousViewControllers:transitionCompleted completed: Bool)` êµ¬í˜„í•˜ê¸°
   - ìš” ë©”ì„œë“œëŠ” UIPageViewControllerDelegateì— ìˆëŠ” ë©”ì„œë“œë¡œ, ìš°ë¦¬ì˜ PageViewController ë‚´ì˜ Coordinatorì—ì„œ êµ¬í˜„í•´ì¤€ë‹¤.
   - dataSource ì§€ì •ì„ í•´ì¤€ ê²ƒì²˜ëŸ¼ delegateë„ makeUIViewControllerì—ì„œ context.coordinatorë¡œ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

```swift
   func pageViewController(_ pageViewController: UIPageViewController,
                            didFinishAnimating finished: Bool,
                            previousViewControllers: [UIViewController],
                            transitionCompleted completed: Bool) {
        if completed,
           let visibleViewController = pageViewController.viewControllers?.first,
           let index = controllers.firstIndex(of: visibleViewController) {
            parent.currentPage = index
        }
    }
```

pageë¥¼ ì›€ì§ì´ëŠ” animatingì´ ëë‚˜ë©´ currentPageë¥¼ ë…¸ì¶œëœ viewControllerì˜ indexë¡œ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.
Binding ëœ ê°’ì´ê¸° ë•Œë¬¸ì— currentPageê°€ ë³€ê²½ë˜ë©´ ì•„ë˜ì²˜ëŸ¼ Textë„ ë³€í•œë‹¤.

<img src="https://user-images.githubusercontent.com/22000470/196963538-76358f6f-662b-4601-995b-95520cf6bd3e.gif" width="400">

## Section 4. Add a Custom Page Control
ì´ì œ currentPageê°€ ë³€í™”í•˜ëŠ” ê²ƒë„ í™•ì¸í–ˆìœ¼ë‹ˆ ì§„ì§œ UIPageControlì„ ë¶™ì—¬ë³´ì. UIPageControlì€ UIViewì— ì†í•˜ëŠ” ì¹œêµ¬ì´ê¸° ë•Œë¬¸ì— **UIViewRepresentable** ì„ ì¤€ìˆ˜í•˜ëŠ” structë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.

1. PageControl.swift ìƒì„±
   - UIViewRepresentableì„ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤. UIViewControllerRepresentableê³¼ êµ¬í˜„í•´ì•¼ í•  ë©”ì„œë“œëŠ” ê°™ë‹¤. (life cycleë„ ê°™ë‹¤.)

```swift
import SwiftUI
import UIKit

struct PageControl: UIViewRepresentable {
    var numberOfPages: Int
    @Binding var currentPage: Int
    
    func makeUIView(context: Context) -> UIPageControl {
        let control = UIPageControl()
        control.numberOfPages = numberOfPages
        
        return control
    }
    
    func updateUIView(_ uiView: UIPageControl, context: Context) {
        uiView.currentPage = currentPage
    }
}
```

UIPageControlì„ ë°˜í™˜í•˜ê³ , controlì´ í‘œê¸°í•´ì•¼ í•  page ìˆ˜ëŠ” ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ”ë‹¤. currentPageëŠ” PageViewì˜ currentPageë¥¼ ë°”ì¸ë”©í•œ ê°’ì„ ì‚¬ìš©í•œë‹¤.

2. PageViewì— PageControl ì¶”ê°€í•˜ê¸°
   - VStackì„ ZStackìœ¼ë¡œ ë³€ê²½í•´ PageViewController ìœ„ì— PageControlì´ ë…¸ì¶œë˜ë„ë¡ í•œë‹¤.

![image](https://user-images.githubusercontent.com/22000470/196966806-1d3d803c-358e-45d8-b15f-b26ef3538e85.png)

3. PageControlì„ ëˆŒë €ì„ ë•Œë„ ì´ë™í•˜ë„ë¡ ìˆ˜ì •
   - 2ë²ˆê¹Œì§€ êµ¬í˜„í•˜ê³  ë‚˜ë©´ í™”ë©´ì˜ PageControlì„ ëˆŒë €ì„ ë•Œ PageControlì€ ë³€ê²½ë˜ì§€ë§Œ ì´ë¯¸ì§€ëŠ” ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ í™”ë©´ì´ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ currentPageë¥¼ ì—…ë°ì´íŠ¸ í•´ ì¤„ í•„ìš”ê°€ ìˆë‹¤.
   - ì—…ë°ì´íŠ¸ë¥¼ í•  ë•ŒëŠ” Coordinatorë¥¼ ì„ ì–¸í•´ í•´ë‹¹ í´ë˜ìŠ¤ ë‚´ì—ì„œ ê°’ì„ ì¡°ì‘í•˜ë„ë¡ í•œë‹¤.

![image](https://user-images.githubusercontent.com/22000470/196968938-a8d74fef-a552-4996-8436-e7a12300ea3d.png)

valueChangeì¼ ë•Œ updateCurrentPageê°€ í˜¸ì¶œë˜ë„ë¡ makeUIViewì—ì„œ addTargetì„ ì‚¬ìš©í•´ controlì— ë™ì‘ì„ ì§€ì •í•´ì£¼ì—ˆë‹¤.

4. CategoryHomeì—ì„œ ì„ì‹œë¡œ ë„£ì–´ë‘ì—ˆë˜ ì´ë¯¸ì§€ ëŒ€ì‹  PageViewë¥¼ ì¶”ê°€í•œë‹¤.

![image](https://user-images.githubusercontent.com/22000470/196969863-e279cdc4-88cc-44c0-92af-fe5dc1ec8ba8.png)

ìµœì¢…ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤.
<img src="https://user-images.githubusercontent.com/22000470/196970455-42d2b5c6-fc85-4b51-b588-50df56566796.gif" width="400">

## ë§ˆë¬´ë¦¬
watchOSì™€ macOS ë¶€ë¶„ì„ ì œì™¸í•˜ë©´ SwiftUI Tutorialì— ìˆëŠ” ëª¨ë“  ë‚´ìš©ì„ ë‹¤ ì •ë¦¬í–ˆë‹¤. SearchAppì„ ë§Œë“¤ì–´ë³´ëŠ” ë° ì•„ì£¼ í° ë„ì›€ì´ ëë‹¤. í™•ì‹¤íˆ íŠœí† ë¦¬ì–¼ì„ ëë‚´ê³  ë‚˜ë‹ˆê¹Œ ì¡°ê¸ˆì€ swiftUIì— ì ì‘ì´ ëœ ê²ƒ ê°™ì€ ëŠë‚Œ? ì •í™•íˆ ì•Œì•„ì„œ ë‚´ ê²ƒìœ¼ë¡œ ë§Œë“œëŠ” ê²Œ ì¤‘ìš”í•˜ê² ì§€ë§Œ ì¼ë‹¨ì€ ìµìˆ™í•´ì§„ ê²ƒë§Œìœ¼ë¡œë„ ë¿Œë“¯í•˜ë‹¤ ğŸ˜

ì´ì œ SearchApp ë§ˆë¬´ë¦¬ ì§€ìœ¼ëŸ¬ ê°€ë´ì•¼ê² ë‹¤!!
